@{
    ViewData["Title"] = "System Logs";
}

<link rel="stylesheet" href="~/css/reports.css" />

<div class="table-wrapper reports-page">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <h4>System Logs</h4>
            <small class="text-muted">Filter, search and inspect recent application logs</small>
        </div>

        <div class="d-flex gap-2 align-items-center">
            <select id="severityFilter" class="form-select form-select-sm">
                <option value="All">All Severities</option>
                <option>Info</option>
                <option>Warning</option>
                <option>Error</option>
                <option>Debug</option>
            </select>

            <label class="mb-0 small ms-2">From</label>
            <input id="fromDate" type="date" class="form-control form-control-sm" />

            <label class="mb-0 small ms-2">To</label>
            <input id="toDate" type="date" class="form-control form-control-sm" />

            <input id="q" type="search" placeholder="Search message, source or user" class="form-control form-control-sm ms-2" style="min-width:220px;" />

            <button id="applyBtn" class="btn btn-sm btn-approve ms-2">Apply</button>

            <div class="form-check form-check-inline ms-2 align-items-center">
                <input class="form-check-input" type="checkbox" id="autoRefresh" checked />
                <label class="form-check-label small" for="autoRefresh">Auto-refresh</label>
            </div>
        </div>
    </div>

    <div class="card p-2 mb-3">
        <div class="log-table-wrapper">
            <table class="table table-striped" id="logsTable">
                <thead>
                    <tr>
                        <th style="width:190px">Timestamp</th>
                        <th style="width:100px">Severity</th>
                        <th style="width:150px">Source</th>
                        <th>Message</th>
                        <th style="width:90px">User</th>
                        <th style="width:80px">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- filled via JS -->
                </tbody>
            </table>
        </div>

        <div class="d-flex justify-content-between align-items-center mt-2">
            <div>
                <small class="text-muted">Showing <span id="shownCount">0</span> / <span id="totalCount">0</span> logs</small>
            </div>
            <div>
                <button id="prevPage" class="btn btn-sm btn-outline-secondary me-1">Prev</button>
                <button id="nextPage" class="btn btn-sm btn-outline-secondary">Next</button>
            </div>
        </div>
    </div>
</div>

<!-- Details modal -->
<div class="modal fade" id="logDetailsModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Log Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <pre id="logDetailsContent" class="mb-0"></pre>
      </div>
    </div>
  </div>
</div>
