@using NUTRIBITE.Models
@model IEnumerable<FoodCategory>

<h3>View Food Categories</h3>

<div class="table-wrapper">
    <table class="admin-table">
        <thead>
            <tr>
                <!-- SERIAL NUMBER -->
                <th>
                    Sr No.
                </th>

                <!-- PRODUCT CATEGORY -->
                <th>
                    <a asp-action="ViewCategory"
                       asp-route-sortOrder="@ViewBag.CategorySort"
                       class="sortable">
                        Product Category ⇅
                    </a>
                </th>

                <!-- PRODUCT IMAGE -->
                <th>
                    Product Image
                </th>

                <!-- ACTION -->
                <th>
                    Action
                </th>
            </tr>
        </thead>

        <tbody>
            @if (Model != null && Model.Any())
            {
                int sr = 1;   // 🔹 SERIAL NUMBER START

                foreach (var item in Model)
                {
                    <tr>
                        <!-- SERIAL NO -->
                        <td>@sr</td>

                        <!-- PRODUCT CATEGORY -->
                        <td>@item.ProductCategory</td>

                        <!-- PRODUCT IMAGE -->
                        <td class="image-cell">
                            <div class="image-box">
                                @if (!string.IsNullOrEmpty(item.ProductPic))
                                {
                                    <img src="~/images/Product/@item.ProductPic"
                                         alt="@item.ProductCategory"
                                         onerror="this.onerror=null;this.src='/images/Product/default.jpg';" />
                                }
                                else
                                {
                                    <img src="~/images/Product/default.jpg" alt="No Image" />
                                }
                            </div>
                        </td>

                        <!-- ACTIONS -->
                        <td>
                            <a asp-action="EditCategory"
                               asp-route-id="@item.cid"
                               class="btn btn-edit">
                                Edit
                            </a>

                            <a asp-action="DeleteCategory"
                               asp-route-id="@item.cid"
                               class="btn btn-delete"
                               onclick="return confirm('Are you sure you want to delete this category?');">
                                Delete
                            </a>
                        </td>
                    </tr>

                    sr++;  // 🔹 SERIAL NUMBER INCREMENT
                }
            }
            else
            {
                <tr>
                    <td colspan="4" class="no-records">
                        No records found
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
